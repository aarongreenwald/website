<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Testing &amp; React Native: Lessons from the Battlefield</title>
	<meta name="description" content="Slides for talk about Testing React Native applications">
	<meta name="author" content="Aaron Greenwald">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<base href="/slides/" />

	<!-- Theme used for syntax highlighting of code -->
	<!--<link rel="stylesheet" href="revealjs/lib/css/zenburn.css">-->
	<!--<link href="/static/socialicious/css/socialicious.css" rel="stylesheet">-->

	<!--general theme -->
	<script>
      const accessible=window.location.search.indexOf('accessible') !== -1;
      if (!accessible) {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'revealjs/css/reveal.css';
        document.getElementsByTagName('head')[0].appendChild(link);
        const theme = document.createElement('link');
        theme.rel = 'stylesheet';
        theme.type = 'text/css';
        theme.href = 'theme/agreenwald.css';
        theme.id = 'theme';
        document.getElementsByTagName('head')[0].appendChild(theme);
      }
	</script>


	<!-- Printing and PDF exports -->
	<script>
      const link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'revealjs/css/print/pdf.css' : 'revealjs/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>

	<!--[if lt IE 9]>
	<script src="revealjs/lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

<div class="reveal">
	<div class="slides">
		<section class="title-page">
			<h1 class="title">Testing &amp; React Native</h1>
				<h4 class="subtitle">Lessons from the Battlefield</h4>
				<p class="author">
					Aaron Greenwald
				</p>
				<small class="links">
					<a href="mailto:aaron@aarongreenwald.com">
						<!--<i class="icon icon-mail"></i>-->
						aaron@aarongreenwald.com
					</a>
					|
					<a href="https://twitter.com/aaronjgreenwald">
						<!--<i class="icon icon-twitter-sign"></i>-->
						@aaronjgreenwald
					</a>
					|
					<a href="https://github.com/aarongreenwald">
						<!--<i class="icon icon-github-sign"></i>-->
						github.com/aarongreenwald
					</a>
				</small>

				<aside class="notes" data-markdown>
					** Abstract**

					_Wix has been about cutting edge web development for a while, and we're all about TDD.
					When we started mobile with RN, we struggled to replicate our test-heavy workflow that we'd grown to love.
					We lacked tooling, best practices, and general know-how.

					In this talk, you'll hear about what works and what doesn't.
					You'll find out what methods we tried and rejected so you won't have to make the same mistakes,
					and you'll get pointers toward approaches that we've found work so you can get started on the right foot.

					A high-level talk that covers some philosophy, architecture, practical tips you can use, and interesting tidbits._
				</aside>

		</section>
        <section>
            Survey
            <aside class="notes" data-markdown>
                * RN Experience
                * Testing Experience/Attitude
            </aside>
        </section>
		<section data-state="chapter-title">
			01 / Once Upon A Time
			<aside class="notes" data-markdown>
				* We were web developers
				* Angular was popular
				* We had a process that worked and that we could rely on, and we believed in
					* TDD, CI, CD, Rollbacks, devops, etc...especially TDD
				* Life was good
			</aside>
		</section>
		<section>A long, long time ago</section>
		<section class="aside">(About 1.5 years ago)</section>
		<section class="aside">(That's 10.5 dog years)</section>
		<section class="aside">(And 10.5<sup>10000000</sup> JS ecosystem years)</section>

		<section data-state="background-img me"></section>
		<section data-state="background-img trump">
			<div class="caption">Sources:
				<a href="https://www.theguardian.com/us-news/2015/aug/22/donald-trump-wont-win-republican-presidential-nomination">The Guardian</a> |
				<a href="https://fivethirtyeight.com/features/donald-trumps-six-stages-of-doom/">Five Thirty Eight</a>
			</div>
		</section>
		<!--<section data-state="background-img guardian"></section>-->
		<!--<section data-state="background-img natesilver"></section>-->
		<section data-state="background-img angular"></section>

		<section>
			BOOOORING!
		</section>

		<section data-background="#000">
			<!-- This section intentionally left blank -->
			<aside data-markdown class="notes">
				So I went to work at Wix. On my first day I was offered RN work.
			</aside>
		</section>
		<section data-state="background-img badass">
		</section>
		<section data-state="chapter-title">
			02 / Valiant &amp; Brave
			<aside class="notes">

			</aside>
		</section>

		<section data-state="background-img buffoon">
			<div class="caption">Credit: <a href="http://www.timeout.com/">Timeout</a></div>
		</section>

		<section>
			<div>React Native 0.13</div>
			<div>
				<span class="fragment">Android Support</span>
				<span class="fragment"><i>Yeah, ok</i></span>
			</div>
			<div class="fragment">Fast & Furious Development</div>

		</section>
		<section data-state="chapter-title">
			03 / Taming the Wild
		</section>
		<section>
			Testing
			<div class="testing-pyramid-instance"></div>

		</section>

		<section>
			<div class="testing-pyramid-instance focus unit no-fragment"></div>
			<aside class="notes">
				This is easy. I can even test Redux! Jasmine, mocha, whatever. I don’t care.
				## TODO - code sample.

				<!--<section>-->
				<!--<i>(Yes, they're ugly. We can do better.)</i>-->
				<!--</section>-->

			</aside>
		</section>

		<section>
			[Code Sample]
		</section>
		<section>
			[Better Code Sample]
		</section>
		<section>
			<div class="testing-pyramid-instance focus component no-fragment"></div>
			<aside class="notes">
			</aside>


		</section>
		<section>Enzyme</section>
		<section>[Boilerplate]</section>
		<section>[Angular Comparison]</section>
		<section>Enzyme Drivers</section>
		<section>[Better Tests]</section>
		<section>
			Jest
		</section>
		<section>
			<div class="testing-pyramid-instance focus e2e no-fragment"></div>

			<aside class="notes">
				Appium was slow and flaky. And the tests looked like a mess

				Detox - here’s where it gets interesting

				## TODO: How detox works

			</aside>
		</section>

		<section>Appium</section>
		<section>
			<div class="list-header">Most Important Thing<sup><small>TM</small></sup></div>
			<div class="fragment">Stable</div>
			<div class="fragment">Fast</div>
		</section>
		<section>
			WD, IWD, WTF
		</section>
		<section>
			[Oh, and ugly code for appium tests]
		</section>
		<section>Reframing the Problem</section>
		<section>E2E vs UI Automation</section>
		<section>
			[Detox Gifs - two, side by side]
		</section>

		<section data-state="chapter-title">
			04 / Now What??
		</section>
		<section><i>(Detox for Android)</i></section>
		<section>
			<p class="fragment">Clueless</p>
			<p class="fragment">Beginner</p>
			<p class="fragment">Cynic</p>
			<p class="fragment">Expert</p>
		</section>

		<section>
			<p>Stability</p>
			<p class="fragment">Lots of Options</p>
			<p class="fragment">Few Excuses</p>
		</section>

		<section data-background="#000">
			<!-- This section intentionally left blank -->
			<aside data-markdown class="notes">
				Key Takeaways:

				* If you're just starting out, what I laid out - detox, enzyme, and whatever on the unit testing is a good starting point.
				* There are many ways to test RN apps, and although it's definitely harder than the web, the tooling is getting better and there aren't any excuses to not test.
				* If you're good at testing, please help the community make these tools more mature.

			</aside>
		</section>
		<section>
			Thank You
			<small class="links">
				<a href="mailto:aaron@aarongreenwald.com">aaron@aarongreenwald.com</a> |
				<a href="https://twitter.com/aaronjgreenwald">@aaronjgreenwald</a> |
				<a href="https://github.com/aarongreenwald">github.com/aarongreenwald</a>
			</small>
		</section>
	</div>
</div>

<script src="revealjs/lib/js/head.min.js"></script>
<script src="revealjs/js/reveal.js"></script>

<script>
  const present=window.location.search.indexOf('present') !== -1;
  if (!accessible) {
    Reveal.initialize({
      controls: !present,
      progress: true,
      history: true,
      center: true,
      transition: 'none', // none/fade/slide/convex/concave/zoom
      dependencies: [
        { src: 'revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
//        { src: 'revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'revealjs/plugin/zoom-js/zoom.js', async: true },
        { src: 'revealjs/plugin/notes/notes.js', async: true }
      ]
    });
  }
</script>

<div class="template" id="testing-pyramid">
	<div class="testing-pyramid">
		<div class="zone fragment"><span>E2E</span></div>
		<div class="zone fragment"><span>Component</span></div>
		<div class="zone fragment"><span>Unit</span></div>
	</div>
</div>

<style>
	.template {
		display: none;
	}

	.testing-pyramid {
		 padding-top: 2em !important;
	 }
	.zone {
		height: 3em;
		vertical-align: bottom;
		position: relative;
	}
	.zone span {
		position:absolute;
		bottom: 0;
		left: 0;
		right: 0;

	}
	.zone:nth-child(1) {
		background-color: yellow;
		clip-path: polygon(50% 0, 62.5% 100%, 37.5% 100%);
		-webkit-clip-path: polygon(50% 0, 62.5% 100%, 37.5% 100%);
	}
	.zone:nth-child(2) {
		background-color: red;
		clip-path: polygon(37.5% 0, 62.5% 0, 75% 100%, 25% 100%);
		-webkit-clip-path: polygon(37.5% 0, 62.5% 0, 75% 100%, 25% 100%);
	}
	.zone:nth-child(3) {
		background-color: yellowgreen;
		clip-path: polygon(25% 0, 75% 0, 87.5% 100%, 12.5% 100%);
		-webkit-clip-path: polygon(25% 0, 75% 0, 87.5% 100%, 12.5% 100%);

	}

	.focus {
		transform: scale(.75);
	}

	.focus .zone {
		opacity: 0.3 !important;
	}

	.focus.unit .zone:last-child {
		opacity: 1 !important;
	}

	.focus.component .zone:nth-child(2) {
		opacity: 1 !important;
	}

	.focus.e2e .zone:first-child {
		opacity: 1 !important;
	}

	.natesilver body {
		background-image: url(2017/react-amsterdam/natesilver.png);
	}

	.guardian body {
		background-image: url(2017/react-amsterdam/guardian.png);
	}

	.trump body {
		background-image: url(2017/react-amsterdam/trump.png);
	}

	.me body {
		background-image: url(2017/react-amsterdam/me.jpg);
	}

	.buffoon body {
		background-image: url(//media.timeout.com/images/100424795/1372/772/image.jpg);
	}

	.badass body {
		background-image: url(//s-media-cache-ak0.pinimg.com/564x/1c/13/56/1c1356a2feb21c53e18278ff3e77bf5d.jpg);
	}

	.angular body {
		background-image: url(//blog.altoros.com/wp-content/uploads/2014/05/angularjs-logo.png);
	}



</style>

<script>
  let template = document.getElementById('testing-pyramid').innerHTML;
  document.querySelectorAll('.testing-pyramid-instance').forEach(tp => {
    if (tp.classList.contains('no-fragment')) {
      template = template.split('fragment').join('');
	}
    tp.innerHTML = template;
  });
</script>

</body>
</html>
